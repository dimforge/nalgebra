sudo: false
language: rust
rust:
  - nightly
  - beta
  - stable

env:
  - CARGO_FEATURES=""
  - CARGO_FEATURES="arbitrary"
  - CARGO_FEATURES="mint"
  - CARGO_FEATURES="alloc"
  - CARGO_FEATURES="serde-serialize"
  - CARGO_FEATURES="abomonation-serialize"
  - CARGO_FEATURES="debug arbitrary mint serde-serialize abomonation-serialize"
  - NO_STD=1 CARGO_FEATURES=""
  - NO_STD=1 CARGO_FEATURES="alloc"

addons:
  apt:
    packages:
      - gfortran
      - libblas3gf
      - liblapack3gf
script:
    - rustc --version
    - cargo --version
    - ./ci/build.sh
    - ./ci/test.sh

matrix:
  exclude:
  - rust: stable
    env: NO_STD=1 CARGO_FEATURES=""
  - rust: beta
    env: NO_STD=1 CARGO_FEATURES=""
  - rust: stable
    env: NO_STD=1 CARGO_FEATURES="alloc"
  - rust: beta
    env: NO_STD=1 CARGO_FEATURES="alloc"
